<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0) on Mon Jun 10 14:23:47 EDT 2013 -->
<title>com.indexdata.mkjsf.config</title>
<meta name="date" content="2013-06-10">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="com.indexdata.mkjsf.config";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Package</li>
<li><a href="../../../../com/indexdata/mkjsf/controls/package-summary.html">Next Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/indexdata/mkjsf/config/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<h1 title="Package" class="title">Package&nbsp;com.indexdata.mkjsf.config</h1>
<div class="docSummary">
<div class="block">The library comes with two alternative mechanisms for configuration of an application, but it is
 possible to apply a custom scheme too or not use the configurations at all.</div>
</div>
<p>See:&nbsp;<a href="#package_description">Description</a></p>
</div>
<div class="contentContainer">
<ul class="blockList">
<li class="blockList">
<table class="packageSummary" border="0" cellpadding="3" cellspacing="0" summary="Interface Summary table, listing interfaces, and an explanation">
<caption><span>Interface Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Interface</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../com/indexdata/mkjsf/config/Configurable.html" title="interface in com.indexdata.mkjsf.config">Configurable</a></td>
<td class="colLast">
<div class="block">Interface to be implemented by any part of an application that wish to
 use a ConfigurationReader for it's configuration.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../com/indexdata/mkjsf/config/ConfigurationReader.html" title="interface in com.indexdata.mkjsf.config">ConfigurationReader</a></td>
<td class="colLast">
<div class="block">Interface to be implemented by classes that read configurations from a source -
 i.e.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="packageSummary" border="0" cellpadding="3" cellspacing="0" summary="Class Summary table, listing classes, and an explanation">
<caption><span>Class Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../com/indexdata/mkjsf/config/Configuration.html" title="class in com.indexdata.mkjsf.config">Configuration</a></td>
<td class="colLast">
<div class="block">Represents a configuration as a set of key-value pairs</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../com/indexdata/mkjsf/config/Mk2ConfigReader.html" title="class in com.indexdata.mkjsf.config">Mk2ConfigReader</a></td>
<td class="colLast">
<div class="block">Reads configuration from a MasterKey configuration scheme</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../com/indexdata/mkjsf/config/WebXmlConfigReader.html" title="class in com.indexdata.mkjsf.config">WebXmlConfigReader</a></td>
<td class="colLast">
<div class="block">Reads a configuration from the context parameters of the deployment descriptor (web.xml)</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<a name="package_description">
<!--   -->
</a>
<h2 title="Package com.indexdata.mkjsf.config Description">Package com.indexdata.mkjsf.config Description</h2>
<div class="block">The library comes with two alternative mechanisms for configuration of an application, but it is
 possible to apply a custom scheme too or not use the configurations at all.
 <p>The library does require that a configuration scheme is chosen - in beans.xml as described below.</p>
 <p>But the library does NOT impose any mandatory parameters in order to start up (except for those required for 
 bootstrapping the configuration). The library <i>does</i> know of certain parameters, if it encounters them.

 <p>The known parameters are TYPE (service type) PAZPAR2_URL, SERVICE_ID, and SERVICE_PROXY_URL</p>
 
 <p>The built-in configuration schemes are:</p>
 <ul>
  <li>Configuration by context parameters in web.xml</li>
  <li>The configuration scheme Index Data uses for other MasterKey applications</li>
 </ul> 
 
 <p>It must be determined deploy-time what configuration scheme to use, by selecting the preferred 
 mechanism in the application's beans.xml. In this example the MasterKey configuration scheme is injected:</p> 
 
 <pre>
 &lt;beans xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="
     http://java.sun.com/xml/ns/javaee 
     http://java.sun.com/xml/ns/javaee/beans_1_0.xsd"&gt;  
     &lt;alternatives>         
        &lt;class>com.indexdata.mkjsf.config.Mk2ConfigReader&lt;/class&gt;
        &lt;!-- Options                      Mk2ConfigReader     --&gt;
        &lt;!--                              WebXmlConfigReader  --&gt;        
     &lt;/alternatives&gt;          
 &lt;/beans&gt;
 </pre>
 
 <p>For the web.xml configuration scheme (choosing WebXmlConfigReader in beans.xml)
 to pre-define the URL of the Pazpar2 to use and choose Pazpar2 as the selected
 service type, the configuration could be:</p>
 
 <pre>
  &lt;context-param&gt;
   &lt;param-name&gt;PAZPAR2_URL&lt;/param-name&gt;
   &lt;param-value&gt;http://localhost:8004/&lt;/param-value&gt;
  &lt;/context-param&gt;
  &lt;context-param&gt;
   &lt;description&gt;Service type. Possible values: SP, PZ2, TBD&lt;/description&gt;
   &lt;param-name&gt;TYPE&lt;/param-name&gt;
   &lt;param-value&gt;PZ2&lt;/param-value&gt;  
  &lt;/context-param&gt;
 </pre>
 
 <p>For the Mk2ConfigReader scheme to work, the web.xml must then contain pointers to the configuration directory 
 and properties file. The specific configuration itself would be in those files then.
 In this example the configuration directory is in the web application itself (war://testconfig). A more regular 
 example would put it in a separate directory to not have it overwritten by each deployment of the war.</p> 
 <pre>
 &lt;context-param&gt;
  &lt;param-name&gt;MASTERKEY_ROOT_CONFIG_DIR&lt;/param-name&gt;
  &lt;param-value&gt;war://testconfig&lt;/param-value&gt;
 &lt;/context-param&gt;
 &lt;context-param&gt;
  &lt;description&gt;
   The sub directory to hold config file(s) for this Masterkey component.
  &lt;/description&gt;
  &lt;param-name&gt;MASTERKEY_COMPONENT_CONFIG_DIR&lt;/param-name&gt;
  &lt;param-value&gt;/jsfdemo&lt;/param-value&gt;
 &lt;/context-param&gt;
 &lt;context-param&gt;
  &lt;param-name&gt;MASTERKEY_CONFIG_FILE_NAME&lt;/param-name&gt;
  &lt;param-value>jsfdemo.properties&lt;/param-value&gt;
 &lt;/context-param&gt;
 &lt;context-param&gt;
  &lt;description&gt;
   Defines the lifespan of configuration parameters as retrieved
   from the file pointed to by MASTERKEY_CONFIG_FILE_NAME.
   Can be SERVLET (cached) or REQUEST (read for every request).
   Will default to SERVLET.
  &lt;/description&gt;
  &lt;param-name&gt;MASTERKEY_CONFIG_LIFE_TIME&lt;/param-name&gt;
  &lt;param-value&gt;REQUEST&lt;/param-value&gt;
 &lt;/context-param&gt;
 </pre>
 
 <p>The jsfdemo.properties file might look like this for running against a 
 local Pazpar2 service:</p>
 
 <code>pz2client.PAZPAR2_URL = http://localhost:8004/</code>
 
 <p>Some of the other known parameters in this format could be:</p>
 
 <pre>
 service.TYPE = SP              
 proxyclient.SERVICE_PROXY_URL = http://localhost:8080/service-proxy/
 </pre> 
 
 <p>It's possible to implement a custom configuration scheme by either ignoring whatever scheme is 
 injected and then applying the required values otherwise, OR by extending the ConfigurationReader
 and inject that class in beans.xml instead of any of the two predefined options. The extended
 class must construct a Configuration object -- which is basically a set of key-value pairs -- 
 and then set the desired values and hand it off to the Configurable (currently Pz2Service, Pz2Client, 
 and ServiceProxyClient)</p> 
 
 <p>Finally it's possible to set the URL runtime even from the UI pages.</p></div>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Package</li>
<li><a href="../../../../com/indexdata/mkjsf/controls/package-summary.html">Next Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/indexdata/mkjsf/config/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
